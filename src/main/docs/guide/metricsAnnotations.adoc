You can use the Micrometer `@Timed` and `@Counted` annotations on any bean method by adding the `micronaut-micrometer-annotation` dependency to your annotation processor classpath:

dependency:micronaut-micrometer-annotation[groupId="io.micronaut.micrometer", scope="annotationProcessor"]


In order to support adding additional tags programmatically similar to Micrometer's `TimedAspect` / `CountedAspect` ability using a `ProceedingJoinPoint`, create beans of type `AbstractMethodTagger`

.MetricsTagger example
[source,java]
----
include::{testsmetricscore}/MethodNameTagger.java[]
----

You can filter these taggers by utilizing the `MetricOptions` annotation

.MetricOptions filtering taggers example
[source,java]
----
include::{testmetricscore}/MetricOptionsFilterTaggersExample.java[]
----

The `MetricOptions` annotation also provides a means of only processing / publishing a metric based on an `EvaluatedExpression`

.MetricOptions condition example
[source,java]
----
include::{testmetricscore}/MetricOptionsConditionExample.java[]
----
